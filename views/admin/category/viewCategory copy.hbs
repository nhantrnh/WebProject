<a href="/admin">Back</a>
<a href="/admin/category/edit" style="margin-left: 10px;" class="btn btn-warning">Chỉnh sửa danh mục</a>

<div class="category-container flex">
  {{#each categories}}
    <div class="category-item" data-catid="{{catID}}" >
      <h4 onclick="redirectToCat('{{catID}}')">{{catName}}</h4>
      <ul class="item-list" id="items-{{catID}}">
        {{#each items}}
          <li class="item" data-itemid="{{itemID}}" onclick="redirectToItem('{{itemID}}')">{{itemName}}</li>
        {{/each}}
      </ul>
    </div>
  {{/each}}
</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
  $(document).ready(function () {
   var hideTimeout;

    $(".category-item").mouseenter(function () {
      var catID = $(this).data("catid");
      $(".item-list").hide(); // Ẩn tất cả các bảng items
      $("#items-" + catID).show(); // Hiển thị bảng items tương ứng
      clearTimeout(hideTimeout); // Xóa timeout trước đó nếu có
    });

    $(".category-item").mouseleave(function () {
      hideTimeout = setTimeout(function () {
        $(".item-list").hide(); // Ẩn tất cả các bảng items sau 5 giây
      }, 5000);
    });

    $(document).click(function (event) {
      // Kiểm tra nếu chuột được click ở ngoài .category-container
      if (!$(event.target).closest('.category-container').length) {
        $(".item-list").hide(); // Ẩn tất cả các bảng items
      }
    });
  });
  
   function redirectToItem(itemID) {
    window.location.href = '/admin/products?itemID=' + itemID;
  }
   function redirectToCat(catID) {
    window.location.href = '/admin/products?catID=' + catID;
  }
</script>

<style>
  .category-item {
    display: inline-block;
    margin: 10px;
    position: relative;
  }

  .item-list {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    background-color: #fff;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
    padding: 10px;
    z-index: 1;   
  }

  .item {
    
    cursor: pointer;
  }
  h4 {
    cursor: pointer;
  }
</style>
